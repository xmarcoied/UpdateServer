<html> 
    <head>
        <style>
            table, th, td {
                border: 1px solid black;
                border-collapse: collapse;
                margin: auto;
            }
            th, td ,h1 , h3{
                padding: 5px;
                text-align: center;    
            }
        </style>
    </head>
    
    <body>
        {{ template "head.html" . }}
        <hr>
        <table style="margin: auto;">
            <tr>
                <td colspan="2">
                    <h2>New rule associated with release #{{.id}}</h2>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <select id="rules" onchange="ShowRule()" style="width: 100">
                        <option value="">Choose rule</option>
                        <option value="time"> Time Rule </option>
                        <option value="roll"> Rolling Rule </option>
                        <option value="ip"> IP Rule </option>
                        <option value="version"> Version Rule </option>
                        <option value="os"> OS Rule </option>
                    </select>
                </td>
            </tr>
            <tbody id ="time" style="display: none;">
                <form action="/admin/dashboard/new_rule/time/{{.id}}" method="post">
                    <tr>
                        <td colspan="2">Time Rule</td>
                    </tr> 
                    <tr>
                        <th>Start at: </th>
                        <th> <input type="datetime-local" name="timestart"> </th>
                    </tr>
                    <tr>
                        <th>End at: </th>
                        <th> <input type="datetime-local" name="timeend"> </th>
                    </tr>
                    <tr>
                        <td colspan="2"><input type="submit" value="Add"></td>
                    </tr> 
                </form> 
            </tbody>
            <tbody id="version" style="display: none;">
                <form action="/admin/dashboard/new_rule/version/{{.id}}" method="post" >
                    <tr>
                        <td colspan="2">Version Rule</td>
                    </tr> 
                    <tr>
                        <th>Product Version: </th>
                        <th> <input name="product_version" required> </th>
                    </tr>
                    <tr>
                        <td colspan="2"><input type="submit" value="Add"></td>
                    </tr>  
                </form>
            </tobdy>
            <tbody id="os" style="display: none;">
                <form action="/admin/dashboard/new_rule/os/{{.id}}" method="post">
                    <tr>
                        <td colspan="2">OS Rule</td>
                    </tr> 
                    <tr>
                        <th>OS Version: </th>
                        <th> <input name="os_version" required> </th>
                    </tr>
                    <tr>
                        <td colspan="2"><input type="submit" value="Add"></td>
                    </tr>  
                </form>
            </tbody>
            <tbody id="ip" style="display: none;">
                <form action="/admin/dashboard/new_rule/ip/{{.id}}" method="post">
                        <tr>
                            <td colspan="2">IP Rule</td>
                        </tr> 
                        <tr>
                            <th>IP Address: </th>
                            <th> <input name="ip_address" required> </th>
                        </tr>
                        <tr>
                            <td colspan="2"><input type="submit" value="Add"></td>
                        </tr>  
                </form>
            </tbody>
            <tbody id="roll" style="display: none;">
                <form action="/admin/dashboard/new_rule/roll/{{.id}}" method="post">
                    <tr>
                        <td colspan="2">Rolling Release</td>
                    </tr> 
                    <tr>
                        <th>Rolling Presentage: </th>
                        <th> <input type="number" name="roll" min="1" max="99" required> %</th>
                    </tr>
                    <tr>
                        <td colspan="2"><input type="submit" value="Add"></td>
                    </tr>  
                </form>
            </tbody>
        </table>
        <hr>
            <script type="text/javascript">
                function ShowRule(){
                    var selectedrule = document.getElementById('rules').options[document.getElementById('rules').selectedIndex].value
                    var rules = ["time" , "roll" , "ip" , "os" , "version"]
                    for (i = 0; i < rules.length; i++) { 
                        document.getElementById(rules[i]).style.display = "none";
                    }
                    document.getElementById(selectedrule).style.display = "table-row-group";
                }
            </script>
    </body>
</html>
